
import '../BasicSpec.my'


BasicSpec {
  name: "core/Object"
  
  Subject < Object {
    var original_creation_signal_handled: false
    on creation: self.original_creation_signal_handled = true
  }
  
  new_subject: Subject {
    var creation_signal_handled: false
    on creation: self.creation_signal_handled = true
  }
  
  [tests]
  
  "inherits from BasicObject": {
    assert_is_a(new_subject, BasicObject)
  }
  
  "emits the creation signal to all registered handlers on creation": {
    subject = new_subject
    assert(subject.creation_signal_handled)
    assert(subject.original_creation_signal_handled)
  }
  
  "does not expose its signal handler memes": {
    refute(new_subject.memes.fetch(:creation, null))
    refute(new_subject.respond_to?(:creation))
  }
}

