
CodeTools::AST << {
  
  BuilderMethods << {
    block: |loc, array| Body.new(
      line:  loc.line
      array: array
    )
  }
  
  Body < Node, BasicObject {
    var array
    
    to_sexp: [:block, *self.array.map(&:to_sexp)]
    
    bytecode: |g| {
      ary = self.array.dup
      last = ary.pop
      
      ary.each |item| { item.bytecode(g); g.pop }
      last.bytecode(g)
    }
  }
  
}
