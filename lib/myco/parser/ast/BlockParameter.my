
CodeTools::AST << {
  
  BlockParameter < Node, BasicObject {
    var name
    var variable # TODO: remove
    
    Form: [:blkprm, :name]
    
    bytecode: |g| {
      pos(g)
      
      g.push_proc
      
      (self.variable.?depth > 0) &? (
        g.set_local_depth(self.variable.depth, self.variable.slot)
      ) ?? (
        g.set_local(self.variable.slot)
      )
      
      g.pop
    }
  }
   
}
