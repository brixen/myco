
::Myco::Switch < ::Myco::Object {
  var input: void
  var output: void
  var matched: false
  
  when: |expected, &blk| {
    matched || (input==expected && _execute(&blk))
    self
  }
  
  when_true: |&blk| {
    matched || (input && _execute(&blk))
    self
  }
  
  when_false: |&blk| {
    matched || (input || _execute(&blk))
    self
  }
  
  else: |&blk| {
    matched || _execute(&blk)
    self
  }
  
  _execute: |&blk|
    (matched() = true) && (output() = blk.call(input))
}
